#! /bin/env python

m = [
    '                      #######   #  # ##   ###   #######                      ',
    '                      #     # ##  ## #####  # # #     #                      ',
    '                      # ### # ## # ### #####  # # ### #                      ',
    '                      # ### # ##   # # # ####   # ### #                      ',
    '                      # ### # #### #     ##  #  # ### #                      ',
    '                      #     # ####  ####  ## #  #     #                      ',
    '                      ####### # ##  ### #   ### #######                      ',
    '                               ##### ## #  ##                                ',
    '                        #  ####   # #   #     #  #####                       ',
    '                        #### ## # ### # #   ##       ##                      ',
    '                      # # # ##   # # # # ## # ####### #                      ',
    '                       #    ##  # #     # # ###  ###                         ',
    '                          ##  #   #  #    ##  ### ## ##                      ',
    '                       ###    ## # # # #     ## # ###                        ',
    '                         ## #   #  ##     ### ###   ###                      ',
    '                       ##   # #  #    # # #### ###### #                      ',
    '                        #   #    #  ##  #      # #  ##                       ',
    '                      ####  # ##  # #  # #   # ##   # #                      ',
    '                      # #  ###### ##  ## #  #  ##  ####                      ',
    '                      #  #   ##  # #     ### # ###  ###                      ',
    '                       # ##   # ##### ###  #  #######                        ',
    '                      ### #   # ##  ##  ####  #  #####                       ',
    '                      ### #    ## #### # ###  #  # # #                       ',
    '                      # #  ####  ##### # # # # # ######                      ',
    '                      #  ###  ## #  ##  #  ### #    # #                      ',
    '                      ##  ### # ## # #   #   #  # #  #                       ',
    '                       #   #####    ### ## # ##  ###                         ',
    '                        #  # #### ### #    #   ##  ##                        ',
    '                      #    ##   #   ### #   # #### ####                      ',
    '                       # ##   ## ## ##  # ##   #   #  #                      ',
    '                        # ##     ##  # #    #  ## #####                      ',
    '                      #### ## ###   #  ###  #####    #                       ',
    '                        ###  ###    ##    ## ##  # ## #                      ',
]

n = [
    '                                       #                                     ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
    '                                                                             ',
]

class Grid2D:

    def __init__(self, m):
        self.h = len(m)
        self.w = len(m[0])
        self.g = [[ (ord(j) - ord(' ')) // 3 for j in i ] for i in m ]

    def dump_limit(self, l):
        m = -1
        if l:
            m = -l
        for i in self.g:
            print(''.join([chr(3 * j + ord(' ')) for j in i[l:m]]))

    def dump(self):
        self.dump_limit(0)

class Rule30(Grid2D):

    def update(self):
        r = [0, 1, 1, 1, 1, 0, 0, 0]
        g = self.g
        for y in range(len(g) - 1):
            o = g[y]
            n = g[y+1]
            for x in range(len(o)):
                t = (o[(x - 1) % self.w] << 2) | (o[x] << 1) | (o[(x + 1) % self.w])
                n[x] = r[t]

    def merge(self, g):
        for y in range(len(self.g)):
            for x in range(len(self.g[y])):
                self.g[y][x] ^= g.g[y][x]

g1 = Rule30(n)
g2 = Rule30(m)
g1.update()
#g2.dump()
#print('---------------------------------')
#g1.dump()
g1.merge(g2)
#print('---------------------------------')
#g1.dump()
#print('---------------------------------')
g1.dump_limit(22)
